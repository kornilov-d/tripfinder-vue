{"remainingRequest":"/Users/kornilov/thevoyager/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kornilov/thevoyager/frontend/src/views/Welcome.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kornilov/thevoyager/frontend/src/views/Welcome.vue","mtime":1590655104300},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZCYXIgZnJvbSAnQC9jb21wb25lbnRzL05hdkJhci52dWUnCgpleHBvcnQgZGVmYXVsdCB7CgogIGltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CiAgbmFtZTogJ1dlbGNvbWUnLAogIGNvbXBvbmVudHM6IHsKICAgIE5hdkJhcgogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm57CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhdXRoZW50aWNhdGUgKCkgewogICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgIH0KICAgICAgYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5lbmRwb2ludHMub2J0YWluSldULCBwYXlsb2FkKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVUb2tlbicsIHJlc3BvbnNlLmRhdGEudG9rZW4pCiAgICAgICAgICAvLyBnZXQgYW5kIHNldCBhdXRoIHVzZXIKICAgICAgICAgIGNvbnN0IGJhc2UgPSB7CiAgICAgICAgICAgIGJhc2VVUkw6IHRoaXMuJHN0b3JlLnN0YXRlLmVuZHBvaW50cy5iYXNlVXJsLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgLy8gU2V0IHlvdXIgQXV0aG9yaXphdGlvbiB0byAnSldUJywgbm90IEJlYXJlciEhIQogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBKV1QgJHt0aGlzLiRzdG9yZS5zdGF0ZS5qd3R9YCwKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHhockZpZWxkczogewogICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBFdmVuIHRob3VnaCB0aGUgYXV0aGVudGljYXRpb24gcmV0dXJuZWQgYSB1c2VyIG9iamVjdCB0aGF0IGNhbiBiZQogICAgICAgICAgLy8gZGVjb2RlZCwgd2UgZmV0Y2ggaXQgYWdhaW4uIFRoaXMgd2F5IHdlIGFyZW4ndCBzdXBlciBkZXBlbmRhbnQgb24KICAgICAgICAgIC8vIEpXVCBhbmQgY2FuIHBsdWcgaW4gc29tZXRoaW5nIGVsc2UuCiAgICAgICAgICBjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKGJhc2UpCiAgICAgICAgICBheGlvc0luc3RhbmNlKHsKICAgICAgICAgICAgdXJsOiAiL3VzZXIvIiwKICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgcGFyYW1zOiB7fQogICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRBdXRoVXNlciIsCiAgICAgICAgICAgICAgICB7YXV0aFVzZXI6IHJlc3BvbnNlLmRhdGEsIGlzQXV0aGVudGljYXRlZDogdHJ1ZX0KICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdIb21lJ30pCiAgICAgICAgICAgIH0pCgogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgY29uc29sZS5kZWJ1ZyhlcnJvcik7CiAgICAgICAgICBjb25zb2xlLmRpcihlcnJvcik7CiAgICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Welcome.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Welcome.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class = \"welcome\">\n        <NavBar />\n      <form class=\"login form\">\n        <div class=\"field\">\n          <label for=\"id_username\">Username</label>\n          <input\n            v-model=\"username\"\n            type=\"text\"\n            placeholder=\"Username\"\n            autofocus=\"autofocus\"\n            maxlength=\"150\"\n            id=\"id_username\">\n        </div>\n        <div class=\"field\">\n          <label for=\"id_password\">Password</label>\n          <input\n            v-model=\"password\"\n            type=\"password\"\n            placeholder=\"Password\"\n            id=\"id_password\">\n        </div>\n        <button\n          @click.prevent=\"authenticate\"\n          class=\"button primary\"\n          type=\"submit\">\n          Log In\n        </button>\n      </form>\n    </div>\n</template>\n\n<script>\nimport NavBar from '@/components/NavBar.vue'\n\nexport default {\n\n  import axios from 'axios';\n  name: 'Welcome',\n  components: {\n    NavBar\n  },\n  data () {\n    return{\n      username: '',\n      password: ''\n    }\n  },\n  methods: {\n    authenticate () {\n      const payload = {\n        username: this.username,\n        password: this.password\n      }\n      axios.post(this.$store.state.endpoints.obtainJWT, payload)\n        .then((response) => {\n          this.$store.commit('updateToken', response.data.token)\n          // get and set auth user\n          const base = {\n            baseURL: this.$store.state.endpoints.baseUrl,\n            headers: {\n              // Set your Authorization to 'JWT', not Bearer!!!\n              Authorization: `JWT ${this.$store.state.jwt}`,\n              'Content-Type': 'application/json'\n            },\n            xhrFields: {\n              withCredentials: true\n            }\n          }\n          // Even though the authentication returned a user object that can be\n          // decoded, we fetch it again. This way we aren't super dependant on\n          // JWT and can plug in something else.\n          const axiosInstance = axios.create(base)\n          axiosInstance({\n            url: \"/user/\",\n            method: \"get\",\n            params: {}\n          })\n            .then((response) => {\n              this.$store.commit(\"setAuthUser\",\n                {authUser: response.data, isAuthenticated: true}\n              )\n              this.$router.push({name: 'Home'})\n            })\n\n        })\n        .catch((error) => {\n          console.log(error);\n          console.debug(error);\n          console.dir(error);\n        })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  body,html{\n    background-color: black;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n    height: 100%;\n  }\n</style>\n"]}]}