{"remainingRequest":"/Users/kornilov/thevoyager/frontend/node_modules/babel-loader/lib/index.js!/Users/kornilov/thevoyager/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kornilov/thevoyager/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kornilov/thevoyager/frontend/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kornilov/thevoyager/frontend/src/components/Login.vue","mtime":1591891415488},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kornilov/thevoyager/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYXV0aGVudGljYXRlOiBmdW5jdGlvbiBhdXRoZW50aWNhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICB9OwogICAgICBheGlvcy5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmVuZHBvaW50cy5vYnRhaW5KV1QsIHBheWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlVG9rZW4nLCByZXNwb25zZS5kYXRhLnRva2VuKTsgLy8gZ2V0IGFuZCBzZXQgYXV0aCB1c2VyCgoKICAgICAgICB2YXIgYmFzZSA9IHsKICAgICAgICAgIGJhc2VVUkw6IF90aGlzLiRzdG9yZS5zdGF0ZS5lbmRwb2ludHMuYmFzZVVybCwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgLy8gU2V0IHlvdXIgQXV0aG9yaXphdGlvbiB0byAnSldUJywgbm90IEJlYXJlciEhIQogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiSldUICIuY29uY2F0KF90aGlzLiRzdG9yZS5zdGF0ZS5qd3QpLAogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9LAogICAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH07IC8vIEV2ZW4gdGhvdWdoIHRoZSBhdXRoZW50aWNhdGlvbiByZXR1cm5lZCBhIHVzZXIgb2JqZWN0IHRoYXQgY2FuIGJlCiAgICAgICAgLy8gZGVjb2RlZCwgd2UgZmV0Y2ggaXQgYWdhaW4uIFRoaXMgd2F5IHdlIGFyZW4ndCBzdXBlciBkZXBlbmRhbnQgb24KICAgICAgICAvLyBKV1QgYW5kIGNhbiBwbHVnIGluIHNvbWV0aGluZyBlbHNlLgoKICAgICAgICB2YXIgYXhpb3NJbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZShiYXNlKTsKICAgICAgICBheGlvc0luc3RhbmNlKHsKICAgICAgICAgIHVybDogJy91c2Vycy8nLAogICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICBwYXJhbXM6IHt9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldEF1dGhVc2VyJywgewogICAgICAgICAgICBhdXRoVXNlcjogcmVzcG9uc2UuZGF0YSwKICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgY29uc29sZS5kZWJ1ZyhlcnJvcik7CiAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,OAAA,GAAA;AACA,QAAA,QAAA,EAAA,KAAA,QADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,MAAA,KAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA,EAAA,OAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA,EADA,CAEA;;;AACA,YAAA,IAAA,GAAA;AACA,UAAA,OAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,OADA;AAEA,UAAA,OAAA,EAAA;AACA;AACA,YAAA,aAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAFA;AAGA,4BAAA;AAHA,WAFA;AAOA,UAAA,SAAA,EAAA;AACA,YAAA,eAAA,EAAA;AADA;AAPA,SAAA,CAHA,CAcA;AACA;AACA;;AACA,YAAA,aAAA,GAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AACA,QAAA,aAAA,CAAA;AACA,UAAA,GAAA,EAAA,SADA;AAEA,UAAA,MAAA,EAAA,MAFA;AAGA,UAAA,MAAA,EAAA;AAHA,SAAA,CAAA,CAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EACA;AACA,YAAA,QAAA,EAAA,QAAA,CAAA,IADA;AACA,YAAA,eAAA,EAAA;AADA,WADA;;AAKA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA;AADA,WAAA;AAGA,SAdA;AAeA,OAlCA,EAmCA,KAnCA,CAmCA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAvCA;AAwCA;AA9CA;AARA,CAAA","sourcesContent":["<template>\n  <b-container>\n    <b-row class =\"justify-content-md-center\">\n      <b-col lg = \"4\" >\n        <div class = \"login-window\">\n          <b-form >\n            <b-input-group prepend=\"@\" class=\"mb-2 mr-sm-2 mb-sm-0\">\n              <b-input id=\"input-username\" placeholder=\"Логин\" v-model=\"username\"></b-input>\n            </b-input-group>\n            <br>\n            <b-input-group type=\"password\" class=\"mb-2 mr-sm-2 mb-sm-0\">\n              <b-input id=\"input-password\" type=\"password\" placeholder=\"Пароль\" v-model=\"password\"></b-input>\n            </b-input-group>\n            <br>\n            <b-button\n              @click.prevent=\"authenticate\"\n              type=\"submit\">\n              Войти\n            </b-button>\n          </b-form>\n        </div>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'Login',\n  data () {\n    return {\n      username: '',\n      password: ''\n    }\n  },\n  methods: {\n    authenticate () {\n      const payload = {\n        username: this.username,\n        password: this.password\n      }\n      axios.post(this.$store.state.endpoints.obtainJWT, payload)\n        .then((response) => {\n          this.$store.commit('updateToken', response.data.token)\n          // get and set auth user\n          const base = {\n            baseURL: this.$store.state.endpoints.baseUrl,\n            headers: {\n              // Set your Authorization to 'JWT', not Bearer!!!\n              Authorization: `JWT ${this.$store.state.jwt}`,\n              'Content-Type': 'application/json'\n            },\n            xhrFields: {\n              withCredentials: true\n            }\n          }\n          // Even though the authentication returned a user object that can be\n          // decoded, we fetch it again. This way we aren't super dependant on\n          // JWT and can plug in something else.\n          const axiosInstance = axios.create(base)\n          axiosInstance({\n            url: '/users/',\n            method: 'post',\n            params: {}\n          })\n            .then((response) => {\n              this.$store.commit('setAuthUser',\n                {\n                  authUser: response.data, isAuthenticated: true\n                }\n              )\n              this.$router.push({\n                name: 'Home'\n              })\n            })\n        })\n        .catch((error) => {\n          console.log(error)\n          console.debug(error)\n          console.dir(error)\n        })\n    }\n  }\n}\n\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src/components"}]}